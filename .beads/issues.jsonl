{"id":"clprompt-1m6","title":"Implement streaming responses","description":"SSE-based streaming for real-time token output. Nice-to-have for v1.0, can be added post-release.","design":"1. Add send-request-streaming to provider protocol\n2. Implement SSE parsing in gemini.lisp and openai.lisp\n3. Callback-based API for token chunks","acceptance_criteria":"- send-request-streaming protocol function\n- Callback-based API for token chunks\n- Support for Gemini and OpenAI providers","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-29T21:38:20.21768571+01:00","updated_at":"2025-12-01T17:08:34.745422924+01:00","closed_at":"2025-12-01T17:08:34.745422924+01:00","dependencies":[{"issue_id":"clprompt-1m6","depends_on_id":"clprompt-4z8","type":"parent-child","created_at":"2025-11-29T21:38:44.847751378+01:00","created_by":"daemon"}]}
{"id":"clprompt-2dm","title":"Implement execute-prompt orchestration","description":"The execute-prompt function is exported but not implemented. This is the critical orchestration layer that validates input, renders template, sends to provider, and parses/validates output.","design":"Add execute method to src/protocol.lisp:\n1. Validate input against prompt's input-schema\n2. Render template with validated input using render-prompt\n3. Send rendered prompt to provider via send-request\n4. Return plist with :content, :raw, :usage","acceptance_criteria":"- Validate input against prompt's input-schema\n- Render template with validated input\n- Send rendered prompt to provider\n- Return plist with :content, :raw, :usage\n- Use *default-provider* when provider not specified\n- Pass model, temperature, max-tokens from prompt config","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-29T21:38:14.181548753+01:00","updated_at":"2025-11-29T21:43:20.930701988+01:00","closed_at":"2025-11-29T21:43:20.930701988+01:00","dependencies":[{"issue_id":"clprompt-2dm","depends_on_id":"clprompt-4z8","type":"parent-child","created_at":"2025-11-29T21:38:43.07474472+01:00","created_by":"daemon"}]}
{"id":"clprompt-4z8","title":"Complete clprompt v1.0","description":"Complete the remaining features for clprompt v1.0 release. Core implementation (parser, template, schema, providers) is done. Need to implement execute-prompt orchestration, json helper, integration tests, and define-prompt macro.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-29T21:38:13.249195648+01:00","updated_at":"2025-11-29T23:03:47.148788016+01:00","closed_at":"2025-11-29T23:03:47.148788016+01:00"}
{"id":"clprompt-57d","title":"Implement define-prompt macro","description":"Macro-based DSL for defining prompts programmatically without .prompt files. Allows inline schema and template definition.","design":"Create src/define-prompt.lisp:\n1. Define define-prompt macro\n2. Parse :model, :input, :output, :template, :config keys\n3. Build schema objects from DSL\n4. Compile template at macro-expansion time\n5. Bind result to named variable","acceptance_criteria":"- (define-prompt name :model ... :input ... :output ... :template ...) works\n- Creates a named prompt bound to a variable\n- Compiles template at macro-expansion time\n- Validates schema definitions at compile time\n- Update clprompt.asd with new file","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-29T21:38:17.912975155+01:00","updated_at":"2025-12-01T16:20:47.918227433+01:00","closed_at":"2025-12-01T16:20:47.918227433+01:00","dependencies":[{"issue_id":"clprompt-57d","depends_on_id":"clprompt-4z8","type":"parent-child","created_at":"2025-11-29T21:38:43.771076975+01:00","created_by":"daemon"},{"issue_id":"clprompt-57d","depends_on_id":"clprompt-2dm","type":"blocks","created_at":"2025-11-29T21:38:56.618090942+01:00","created_by":"daemon"}]}
{"id":"clprompt-5km","title":"Implement {{json}} template helper","description":"Add the {{json var}} helper to serialize values as JSON in templates. This is essential for passing structured data to LLMs.","design":"Add helper registry to src/template.lisp:\n1. Create *template-helpers* hash table\n2. Add register-helper function\n3. Implement json helper using yason:encode\n4. Update render-segments to recognize helper calls","acceptance_criteria":"- {{json var}} serializes var to JSON string\n- Works with nested objects, arrays, primitives\n- Integrates with existing template rendering\n- Helper registry allows future extension","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-29T21:38:15.405117684+01:00","updated_at":"2025-11-29T22:30:41.951894358+01:00","closed_at":"2025-11-29T22:30:41.951894358+01:00","dependencies":[{"issue_id":"clprompt-5km","depends_on_id":"clprompt-4z8","type":"parent-child","created_at":"2025-11-29T21:38:43.298581555+01:00","created_by":"daemon"}]}
{"id":"clprompt-8j4","title":"Create tutorial/quickstart guide","description":"User documentation for getting started with clprompt. Low priority, can be added post-v1.0.","acceptance_criteria":"- docs/QUICKSTART.md with installation instructions\n- Basic usage examples\n- API reference overview","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T21:38:21.407658005+01:00","updated_at":"2025-12-01T16:04:46.497598687+01:00","closed_at":"2025-12-01T16:04:46.497598687+01:00","dependencies":[{"issue_id":"clprompt-8j4","depends_on_id":"clprompt-4z8","type":"parent-child","created_at":"2025-11-29T21:38:46.269834494+01:00","created_by":"daemon"}]}
{"id":"clprompt-9v0","title":"Add integration tests with mock provider","description":"Create end-to-end tests that exercise the full pipeline without hitting real APIs. Use a mock provider that returns canned responses.","design":"Create tests/mock-provider.lisp with mock-provider class.\nCreate tests/integration-tests.lisp with:\n1. Test loading example .prompt files\n2. Test full execute-prompt flow with mock\n3. Test error handling paths\n4. Update clprompt.asd to include new test files","acceptance_criteria":"- Mock provider class that returns canned responses\n- Tests using example .prompt files\n- Test full execute-prompt flow\n- Test error handling paths\n- All tests pass","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T21:38:16.562749788+01:00","updated_at":"2025-11-29T22:40:08.692108195+01:00","closed_at":"2025-11-29T22:40:08.692108195+01:00","dependencies":[{"issue_id":"clprompt-9v0","depends_on_id":"clprompt-4z8","type":"parent-child","created_at":"2025-11-29T21:38:43.53652716+01:00","created_by":"daemon"},{"issue_id":"clprompt-9v0","depends_on_id":"clprompt-2dm","type":"blocks","created_at":"2025-11-29T21:38:56.430543697+01:00","created_by":"daemon"}]}
{"id":"clprompt-cp0","title":"Parse structured JSON output","description":"Automatic JSON parsing and schema validation for structured responses when output-format is :json.","design":"Extend execute method in src/protocol.lisp:\n1. Check prompt-output-format\n2. If :json, parse response content with yason:parse\n3. Validate parsed JSON against output-schema\n4. Return parsed structure instead of raw string","acceptance_criteria":"- When output-format is :json, parse response as JSON\n- Validate parsed JSON against output-schema\n- Return parsed structure, not raw string\n- Signal validation-error on schema mismatch","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-29T21:38:19.002024266+01:00","updated_at":"2025-11-29T22:31:45.43243828+01:00","closed_at":"2025-11-29T22:31:45.43243828+01:00","dependencies":[{"issue_id":"clprompt-cp0","depends_on_id":"clprompt-4z8","type":"parent-child","created_at":"2025-11-29T21:38:44.020681338+01:00","created_by":"daemon"},{"issue_id":"clprompt-cp0","depends_on_id":"clprompt-2dm","type":"blocks","created_at":"2025-11-29T21:38:56.833777288+01:00","created_by":"daemon"}]}
